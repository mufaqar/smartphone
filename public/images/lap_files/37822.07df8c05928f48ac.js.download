"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37822],{72710:function(e,n,r){r.d(n,{E:function(){return i}});var t=r(25237),i=r.n(t)()(function(){return Promise.all([r.e(41075),r.e(66369),r.e(57831),r.e(59465)]).then(r.bind(r,61903)).then(function(e){return e.ConfirmationDrawerContent})},{loadableGenerated:{webpack:function(){return[61903]}},ssr:!1})},54987:function(e,n,r){r.d(n,{$:function(){return l},z:function(){return u}});var t=r(70865),i=r(96670),s=r(52322),a=r(25237),o=r.n(a),u=o()(function(){return Promise.all([r.e(24394),r.e(41075),r.e(28903),r.e(70180),r.e(60902),r.e(73589),r.e(82361),r.e(35012),r.e(57119),r.e(35670),r.e(39254),r.e(40859),r.e(89118),r.e(11701),r.e(10691)]).then(r.bind(r,73399)).then(function(e){return e.ImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[73399]}},ssr:!1}),c=o()(function(){return Promise.all([r.e(70180),r.e(60902),r.e(89388),r.e(35012),r.e(57119),r.e(35670),r.e(80906)]).then(r.bind(r,60725)).then(function(e){return e.GenerativeImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[60725]}},ssr:!1}),l=function(e){var n=e.shouldRenderGenerativeLicenseDrawer,r=e.isImageLicenseSwitcher;return(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(c,(0,t.Z)({},e)):(0,s.jsx)(u,(0,i.Z)((0,t.Z)({},e),{isImageLicenseSwitcher:r}))})}},5676:function(e,n,r){r.d(n,{E:function(){return R}});var t=r(70865),i=r(96670),s=r(26297),a=r(87394),o=r(52322),u=r(79441),c=r(72710),l=r(44699),d=r(81034),f=r(8149),m=r(94054),v=r(95927),h=r(79320),p=r(58376),w=r(69749),b=r(44297),g=r(95775),C=r(59004),D=r(62767),S=r(776),L=r(72075),P=r(25237),y=r.n(P),Z=r(5632),k=r(2784),I=r(80589),E=r(3255),x=y()(function(){return Promise.all([r.e(41075),r.e(73589),r.e(40859),r.e(92521),r.e(99476)]).then(r.bind(r,99476)).then(function(e){return e.EditorialImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[99476]}},ssr:!1}),j=y()(function(){return r.e(10878).then(r.bind(r,10878)).then(function(e){return e.EditorialVideoLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[10878]}},ssr:!1}),A=r(54987),T=y()(function(){return r.e(9293).then(r.bind(r,9293)).then(function(e){return e.LoggedInMusicLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[9293]}},ssr:!1}),G=y()(function(){return r.e(26278).then(r.bind(r,26278)).then(function(e){return e.LoggedInSfxLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[26278]}},ssr:!1}),H=y()(function(){return Promise.all([r.e(41075),r.e(73589),r.e(40859),r.e(92521),r.e(89047),r.e(21543)]).then(r.bind(r,21543)).then(function(e){return e.LoggedInVideoLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[21543]}},ssr:!1}),U=y()(function(){return Promise.all([r.e(74384),r.e(35012),r.e(7787)]).then(r.bind(r,37488)).then(function(e){return e.ExperimentCVRT1335})},{loadableGenerated:{webpack:function(){return[37488]}},ssr:!1}),M=function(e){var n=e.asset,r=e.onDrawerClose,i=(0,h.y)().setWasLicensingEventSuccessful,s=(0,a.Z)((0,k.useState)(null),2),o=s[0],u=s[1],c=(0,b.A8)(n),l=(0,E.kY)().mutate,d=(0,k.useCallback)(function(e){var r=e.content,s=e.assetsInfo;u(r),i(!0),l((0,g.jC)({licenseeIdentifier:m.RU_,assets:[n]})),l((0,g.jC)((0,t.Z)({licenseeIdentifier:m.RU_,assets:[n]},c===f.pX&&{selectedAssetSize:s[0].selectedAssetSize},c===f.k4&&{licenseName:s[0].licenseName})))},[n,c,l,i]),v=(0,k.useCallback)(function(e){u(e.content)},[]),p=(0,k.useCallback)(function(){u(null),r()},[r]),w=(0,a.Z)((0,k.useState)({}),2),C=w[0],D=w[1],S=(0,a.Z)((0,k.useState)({status:"",error:void 0}),2);return{confirmationDrawerCloseHandler:p,licenseDrawerState:C,licenseDrawerStatus:S[0],licensedContent:o,licensingConfirmationContentDisplayHandler:d,redownloadConfirmationContentDisplayHandler:v,setLicenseDrawerState:D,setLicenseDrawerStatus:S[1],setLicensedContent:u}},R=function(e){var n,r,m,h,P,y=e.onAddToCartSuccess,E=e.onDrawerClose,R=e.isImageLicenseSwitcher,q=e.membershipProps,F=e.buttonClickHandler,_=e.licensedContentHandler,V=e.openLicenseDrawerHandler,N=(0,a.Z)((0,k.useState)(""),2),$=N[0],z=N[1],B=(0,v.i)().asset,X=(0,b.A8)(B),O=(0,D.V9)().data,Q=(void 0===O?{}:O).totalNumSubscriptionsAllTime,W=(0,b.yw)({asset:B}),Y=(0,Z.useRouter)(),J=null==Y?void 0:Y.asPath;L.j&&(P=null==window?void 0:null===(n=window.location)||void 0===n?void 0:n.href);var K=(0,k.useCallback)(function(e){var n,r,t;n=P,console.error(e),null===(r=window.NREUM)||void 0===r||null===(t=r.noticeError)||void 0===t||t.call(r,e,{currentAsPath:J,msg:"(Convert team) - License Drawer - Generate - Image - Error",url:n})},[J,P]),ee=(0,u.L)({asset:B}).showLoggedInConversionPanel,en=(0,g.IP)({assets:[B]}).data,er=(null==en?void 0:null===(r=en.licenses)||void 0===r?void 0:r.length)>0,et=M({asset:B,onDrawerClose:E}),ei=et.confirmationDrawerCloseHandler,es=et.licenseDrawerState,ea=et.licenseDrawerStatus,eo=et.licensedContent,eu=et.licensingConfirmationContentDisplayHandler,ec=et.redownloadConfirmationContentDisplayHandler,el=et.setLicenseDrawerState,ed=et.setLicenseDrawerStatus,ef=(0,k.useMemo)(function(){return(0,i.Z)((0,t.Z)({},es),{actionText:"licensing drawer displayed ".concat(ea.status," state to the user"),alertSeverity:ea.status,component:"LicenseDrawerContentSwitcher.jsx",assetType:"".concat((null==B?void 0:B.imageType)||""," ").concat(X),licenseType:$||""})},[es,ea,B,X,$]);(0,C.L)({customAttributes:ef,error:ea.error,level:[l.cM,l.pn].includes(ea.status)?"error":"",msg:null===(m=ea.error)||void 0===m?void 0:m.message});var em={onAddToCartSuccess:y,onDrawerClose:E,licenseDrawerStatus:ea,setLicenseDrawerStatus:ed,setLicenseDrawerState:el,setLicenseType:z,onLicensingSuccess:eu,onRedownloadSuccess:ec};em.onAddToCartSuccess;var ev=(0,s.Z)(em,["onAddToCartSuccess"]),eh=(0,w.t)(B)?(0,o.jsx)(p.I,{licensedContent:eo,onDrawerClose:ei,asset:B,keywords:null===(h=B.keywords)||void 0===h?void 0:h.slice(0,3)}):(0,o.jsx)(c.E,{licensedContent:eo,onDrawerClose:ei});if((0,k.useEffect)(function(){eo&&R&&(F(),eo&&(V(),_(eo)))},[eo]),eo)return(0,o.jsxs)(o.Fragment,{children:[R&&(0,o.jsx)(A.z,(0,i.Z)((0,t.Z)({},ev),{isImageLicenseSwitcher:R,membershipProps:q})),!R&&eh]});switch(X){case f.nj:return(0,o.jsx)(S.Mp,{value:d.hPQ,children:(0,o.jsx)(j,(0,t.Z)({},ev))});case f.k4:var ep=(0,t.Z)({shouldRenderGenerativeLicenseDrawer:W&&(0===Q||void 0===Q),isImageLicenseSwitcher:R,membershipProps:q},ev),ew=ee&&!er?U:A.$;return(0,o.jsx)(I.ErrorBoundary,{onError:K,fallback:(0,o.jsx)("p",{children:"An error occurred"}),children:(0,o.jsx)(ew,(0,t.Z)({},ep))});case f.pX:return(0,o.jsx)(H,(0,t.Z)({},em));case f.tn:return(0,o.jsx)(G,(0,t.Z)({},em));case f.xF:return(0,o.jsx)(T,(0,t.Z)({},em));case f.VT:return(0,o.jsx)(x,(0,t.Z)({},ev));default:return null}};R.defaultProps={isImageLicenseSwitcher:!1,membershipProps:{},buttonClickHandler:function(){},licensedContentHandler:function(){},openLicenseDrawerHandler:function(){}}},58376:function(e,n,r){r.d(n,{I:function(){return i}});var t=r(25237),i=r.n(t)()(function(){return r.e(88731).then(r.bind(r,88731)).then(function(e){return e.ExperimentUTLZ349Wrapper})},{loadableGenerated:{webpack:function(){return[88731]}},ssr:!1})},69749:function(e,n,r){r.d(n,{t:function(){return l}});var t=r(44297),i=r(43637),s=r(9823),a=r(94909),o=r(12649),u=r(27764),c=r(5632),l=function(e){var n=(0,s.D)().isBrandSstk,r=(0,o.B)(),l=(0,t.aT)(e)&&!(0,t.Xo)(e),d=(0,t.tS)({asset:e}),f=l&&(0,t.PD)({channels:null==e?void 0:e.channels}),m=(0,a.d)(),v=(0,t.f8)(e),h=(0,c.useRouter)(),p=(0,u.fM)(h),w=(0,i.k7)(e);return n&&r&&l&&!d&&!m&&!f&&!v&&!p&&!w}},33839:function(e,n,r){r.d(n,{u:function(){return Z}});var t=r(27739),i=r(60591),s=r(65532),a=r(87414),o=r(44297),u=r(77357),c=r(70008),l=r(2784),d=r(98788),f=r(70865),m=r(96670),v=r(87394),h=r(92228),p=r(45680),w=r(3571),b=r(6647),g=r(3255);function C(){var e=(0,h.Z)(["\n    query getPromotionsEligibility($data: ProductInput) {\n      getPromotionsEligibility(data: $data) {\n        data {\n          id\n          type\n          attributes {\n            discountPercentage\n          }\n        }\n        included {\n          attributes {\n            license\n            name\n            pricing {\n              discountedAmounts {\n                USD\n                CAD\n              }\n              prices {\n                USD\n                CAD\n              }\n            }\n          }\n          id\n          type\n        }\n      }\n    }\n  "]);return C=function(){return e},e}var D=function(e){var n=(null==e?void 0:e.getPromotionsEligibility)||{};try{var r=(0,v.Z)(n.data,1)[0].attributes.discountPercentage,t=(0,v.Z)(n.included,1)[0].attributes.pricing,i=t.discountedAmounts,s=t.prices,a=i.USD,o=s.USD;return{percentage:r,price:a,originalPrice:o}}catch(e){return{}}},S=function(e){var n=e.membershipProducts;return{variables:{data:{productIds:null==n?void 0:n.map(function(e){return e.id}),currency:"USD"}},query:(0,b.gql)(C())}},L=function(e){var n,r=e.membershipProducts,t=void 0===r?[]:r,i=e.shouldFetch,s=(0,w.H)("/"),a=S({membershipProducts:t}),o=a.query,u=a.variables,c=(null==t?void 0:t.length)>0&&void 0!==i&&i,l=(0,g.ZP)(c&&[o,u],(n=(0,d.Z)(function(e){var n;return(0,p.__generator)(this,function(r){switch(r.label){case 0:return[4,s((n=(0,v.Z)(e,2))[0],n[1])];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)})),h=l.data,b=l.isLoading;return(0,m.Z)((0,f.Z)({},D(h)),{isLoading:b})},P=r(62767),y=function(){var e=(0,P.V9)().data;return{isMember:null==e?void 0:e.activeSubscriptions.some(function(e){var n;return(null==e?void 0:null===(n=e.product)||void 0===n?void 0:n.name)===t.E3O})}},Z=function(e){var n=e.asset,r=e.products,d=void 0===r?[]:r,f=e.discount,m=y().isMember,v=void 0!==m&&m,h=(0,c.B)().isIndiaRegion,p=(0,s.PE)(),w=p.currencyData,b=(void 0===w?{}:w).currency,g=p.region,C=!h&&["US","CA"].includes(g),D=(0,o.RT)({asset:n}),S=v&&C&&"USD"===(void 0===b?"USD":b),P=(0,a.$A)(d,t.E3O),Z=null==d?void 0:d.find(function(e){return e.name===t.gIk&&"single-asset-license"===e.archetype}),k=(0,l.useMemo)(function(){return P&&Z?[P,Z]:void 0},[P,Z]),I=(0,u.L)({queryParams:i.sQ,shouldFetch:v&&!k}),E=L({membershipProducts:I||k,shouldFetch:v&&!f});return(0,l.useMemo)(function(){return S?{isMembershipValuePlan:v,membershipProducts:I||k,discount:(null==E?void 0:E.price)?E:f||{},isFreeContentTierAsset:D}:{}},[S,v,I,k,E,f,D])}},77357:function(e,n,r){r.d(n,{L:function(){return d}});var t=r(70865),i=r(96670),s=r(81740),a=r(65532),o=r(49670),u=r(9009),c=r(3255),l=function(e){var n=e.queryParams;return(0,s.Xp)({queryParams:n}).formattedUrl},d=function(e){var n=e.queryParams,r=e.products,s=void 0===r?[]:r,d=e.shouldFetch,f=(0,a.PE)().region,m=(null==s?void 0:s.length)||!(void 0===d||d)?null:l({queryParams:(0,i.Z)((0,t.Z)({},n),{country:f})}),v=(0,c.ZP)(m,function(e){return o.uS.get(e).then(function(e){return(0,u.O)(e.data)})}).data;return(null==s?void 0:s.length)?s:v}}}]);
//# sourceMappingURL=37822.07df8c05928f48ac.js.map